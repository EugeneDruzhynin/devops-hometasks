FROM golang:1.16 as builder
RUN apt-get update && apt-get install -y git && apt-get install -y build-essential
RUN mkdir -p /app/src
WORKDIR /app/src
RUN git -C /app/src clone https://github.com/Fenikks/word-cloud-generator.git && make
RUN cp ./artifacts/ /app/res/word-cloud-generator

FROM  alpine:latest
COPY --from=builder word-cloud-generator /word-cloud-generator
CMD ["word-cloud-generator"]      